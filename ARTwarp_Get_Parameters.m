function fig = ARTwarp_Get_Parameters
% This function generates a graphical user interface to enter the
% parameters of an ARTwarp categorisation

global warpFactorLevel vigilance bias learningRate maxNumCategories maxNumIterations sampleInterval resample callback2

if resample == 0
    state = 'off';
else
    state = 'on'; %if the radio button for resampling on the GUI is unselected, its state is off. Otherwise, its on.
end

h0 = figure('Units','points', ...
    'Color',[0.752941176470588 0.752941176470588 0.752941176470588],...
    'DockControls','off',...
    'IntegerHandle','off',...
    'MenuBar','none',...
    'Name','Enter the Categorisation Parameters',...
    'NumberTitle','off',...
    'PaperPosition',[18 180 576 432], ...
    'PaperUnits','points', ...
    'Position',[317 241 290 300], ...
    'Resize','off', ...
    'Tag','parameterGUI',...
    'Visible','on'); %create a window (see ARTwarp window in ARTwarp.m for explanation of properties)

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','left',...
    'Position',[100 263 150 15], ...
    'String','Warp Factor Level',...
    'Style','text');

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[1 1 1], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','right',...
    'Position',[20 263 75 20], ...
    'String', num2str(warpFactorLevel,'%i'),...
    'Style','edit',...
    'Tag','warpFactorLevel');

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','left',...
    'Position',[100 233 150 15], ...
    'String','Vigilance',...
    'Style','text'); %displays the string 'Vigilance' as a label next to the editible vigilance text box 

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[1 1 1], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','right',...
    'Position',[20 233 75 20], ...
    'String',num2str(vigilance,'%9.2f'),...
    'Style','edit',...
    'Tag','vigilance'); 
    %generates an editible text box next to the label with the current
    %value of the global variable vigilance pre-populated. Its tag is 'vigilance'

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','left',...
    'Position',[100 200 150 15], ...
    'String','Bias',...
    'Style','text'); %label for Bias

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[1 1 1], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','right',...
    'Position',[20 200 75 20], ...
    'String', num2str(bias,'%9.8f'),...
    'Style','edit',...
    'Tag','bias'); %editable text box to enter the 'bias' value

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','left',...
    'Position',[100 166 150 15], ...
    'String','Learning Rate',...
    'Style','text',...
    'Tag','text17'); %label for Learning Rate field

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[1 1 1], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','right',...
    'Position',[20 166 75 20], ...
    'String', num2str(learningRate,'%9.3f'),...
    'Style','edit',...
    'Tag','learningRate'); %editable text box to enter the 'learningRate' value

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','left',...
    'Position',[100 133 150 15], ...
    'String','Maximum Number of Categories',...
    'Style','text'); %label for Max # of Categories

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[1 1 1], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','right',...
    'Position',[20 133 75 20], ...
    'String',num2str(maxNumCategories,'%i'),...
    'Style','edit',...
    'Tag','maxNumCategories'); %editable text field to enter the maxNumCategories value

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','left',...
    'Position',[100 100 150 15], ...
    'String','Maximum Number of Iterations',...
    'Style','text'); %label for max # of iterations

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[1 1 1], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','right',...
    'Position',[20 100 75 20], ...
    'String',num2str(maxNumIterations,'%i'),...
    'Style','edit',...
    'Tag','maxNumIterations'); %editable text box to enter the 'maxNumIterations' value

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','left',...
    'Position',[200 66 150 15], ...
    'String','ms',...
    'Style','text'); %label for resample

h1 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...    
    'Callback', callback2,...
    'FontSize',10, ...
    'FontUnits','points',...
    'Position',[20 66 150 15], ...
    'String','Resample Contours',...
    'Style','radiobutton',...
    'Value', resample,...
    'Tag','resample'); %when radio button is clicked 'on', the value is set to resample. If 'on', global variable callback2 will be called
    %confused about how this radio button works and what's happening with
    %the callback2 and resample variables
h2 = uicontrol('Parent',h0,...
    'Units','points',...
    'BackgroundColor',[1 1 1], ...
    'Enable', state,...
    'FontSize',10, ...
    'FontUnits','points',...
    'HorizontalAlignment','right',...
    'Position',[155 66 40 20], ...
    'String',num2str(sampleInterval*1000,'%5.2f'),...
    'Style','edit',...
    'Tag','sampleInterval'); %editable text box to enter the value of 'sampleInteral'

h1 = uicontrol('Parent',h0, ...
    'Units','points', ...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'Callback','ARTwarp_Run_Categorisation', ...
    'FontSize',10, ...
    'FontUnits','points',...
    'FontWeight','bold', ...
    'ListboxTop',0, ...
    'Position',[20 20 60 20], ...
    'String','OK', ...
    'Tag','runbutton'); %button click OK to run 'ARTwarp_Run_Categorisation'

h1 = uicontrol('Parent',h0, ...
    'Units','points', ...
    'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
    'Callback','close(gcf)', ...
    'FontSize',10, ...
    'FontUnits','points',...
    'ListboxTop',0, ...
    'Position',[190 20 60 20], ...
    'String','Cancel', ...
    'Tag','cancelbutton'); %button to cancel and close window
if nargout > 0, fig = h0; end %if the number of arguments out is > 0 (there are values in the text fields), run the figure's callback (ARTwarp_Run_Categorization)